(this.webpackJsonpbrowser=this.webpackJsonpbrowser||[]).push([[0],{15:function(e,t,n){e.exports=n(27)},20:function(e,t,n){},21:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(12),i=n.n(a),c=(n(20),n(9)),s={},l="miniprogram"===window.__wxjs_environment;function u(e,t){return new Promise((function(n,o){var r=(""+Math.random()).slice(2);s[r]=function(e,t){e?o(e):n(t)},localStorage.setItem("__miniprogram_tunnel_message__s".concat(r),JSON.stringify({type:e,data:t}))}))}window.onstorage=function(e){var t=/__miniprogram_tunnel_message__r([0-9]+)/.exec(e.key);if(t&&e.newValue)try{var n=JSON.parse(e.newValue),o=s[t[1]];o&&(delete s[n.msgId],n.success?o(null,n.data):o(new Error(n.message)))}catch(r){console.error("web-view parse message error: ",r.message)}};n(21);var m=function(){var e=Object(o.useState)(null),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)(!1),s=Object(c.a)(i,2),m=s[0],d=s[1];return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){(l?u("getClipboardText"):Promise.resolve(window.prompt("\u8bf7\u8f93\u5165URL",""))).then((function(e){/https:\/\/twitter\.com\/[^/]+\/status\/\d+\/?/.exec(e)&&(d(!0),fetch("/api/extract/twitter?url=".concat(encodeURIComponent(e))).then((function(e){return e.json()})).then((function(e){d(!1),a(e)})).catch((function(e){return alert(e.message)})))}))}},"\u63d0\u53d6"),m&&r.a.createElement("p",null,"\u63d0\u53d6\u4e2d..."),n&&!n.failed&&r.a.createElement("video",{width:"320",height:"240",preload:"metadata","webkit-playsinline":!0,controls:!0,poster:n.poster},r.a.createElement("source",{src:n.url,type:"video/mp4"}),"Your browser does not support the video tag."),n&&!n.failed&&r.a.createElement("button",{onClick:function(){return e=n.url,t=n.id,u("saveVideoToPhotosAlbum",{url:e,fileName:t});var e,t}},"\u4fdd\u5b58\u89c6\u9891\u5230\u76f8\u518c"),n&&n.failed&&r.a.createElement("div",null,"\u63d0\u53d6\u5931\u8d25\uff01"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(14),p=n(1);i.a.render(r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/",exact:!0},r.a.createElement(m,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.f87b0731.chunk.js.map